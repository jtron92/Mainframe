The Health Checker MODIFY Command (F HZSPROC) is useful for
making dynamic, temporary changes to checks
 Run checks – Run all checks that have an owner beginning with IBM
– F HZSPROC,RUN,CHECK=(IBM???,*)
 Activate checks
– F HZSPROC,ACTIVATE,CHECK=(*,*)
 Deactivate checks
– F HZSPROC,DEACTIVATE,CHECK=( )
 Update a check – Change a check’s attributes
– F HZSPROC,UPDATE,CHECK=(xxxxx,xxxxxxx),SEVERITY=HIGH
 Activate a Policy
– F HZSPROC,ACTIVATE,POLICY=policyname

*************************************************************************************************************************
ALERT CODE : HZS000E3

Check(IBMJES2,JES_CKPT_CONFIG_N1) : IAZH123E ONE OR MORE CHECKPOINTS OR NEW CHECKPOINTS ARE NOT DEFINED

CHECK (IBMJES_CKPT_CONFIG_N1): IAZH124E ONLY ONE CHECKPOINT IS CURRENTLY IN USE

CHECK (IBMXCF,XCF_CDS_SPOF): STC00005 : ONE ORE MORE COUPLE DATASETS HAVE A SINGLE POINT OF FAILURE

********************************************************************************************************************************

JUST PURGE THE HEALTH JOB (BRING IT DOWN) 
REMOVE THE PROCEDURE IN SYS1.PROCLIB
HZSPROC MEMBER
IPL THE SYSTEM AND YOU WONT HAVE ERRORS

*******************************************************************************************************************************

LSU Oct 2007
© 2007 IBM Corporation33
 To make permanent changes how checks behave in your installation, you will create a
policy in HZSPRMxx PARMLIB member
 All control statements for policy definitions are documented
 An Example: VSM_CSA_THRESHOLD check:
CHECK(IBMVSM,VSM_CSA_THRESHOLD)
CHECK SEVERITY: HIGH
CHECK PARM: CSA(80%),ECSA(80%)
You want to change the check values for CSA and CSA to 70% and MEDIUM severity
F hzsproc,UPDATE,CHECK=(IBMVSM,VSM_CSA_THRESHOLD),PARM=(70,70),SEVERITY=MEDIUM
To make permanent change in your environment, Update HZSPRMxx member
ADDREPLACE POLICY STMT(WSC2) UPDATE CHECK(IBMVSM,VSM_CSA_THRESHOLD)
PARM(70,70) SEVERITY(MEDIUM)
DATE(20060902) REASON(‘This is my shop


















z/OS 1.9 Usability
Health Checker checks - New and Updated Checks…
 CHECK(IBMTSOE,TSOE_USERLOGS)
– Verifies USERLOGS are in effect for SEND command
 CHECK(IBMTSOE,TSOE_PARMLIB_ERROR)
• Verifies whether there were problems setting the groupings of settings (Authorized
commands, Authorized programs, Send settings, etc.), when the IKJTSOxx parmlib
members were processed.
 Check(IBMCS,CSTCP_SYSPLEXMON_RECOV_TCPIPStackname)
– Verifies IPCONFIG DYNAMICXCF or IPCONFIG6 DYNAMICXCF parms and the
GLOBALCONFIG SYSPLEXMONITOR RECOVERY parameter
 Check(IBMCS,CSVTAM_VIT_SIZE)
– Verifies maximum VTAM Internal Trace (VIT) table size value
 Check(IBMCS,CSVTAM_VIT_OPT_PSSSMS)
– Verifies the VIT PSS SMS options are active
 Check(IBMCS,CSVTAM_VIT_DSPSIZE)
– Verifies a VIT dataspace table size of 5 (5 MB)
LSU Oct 2007
© 2007 IBM Corporation42


z/OS 1.9 Usability
Health Checker checks - New and Updated Checks…
 Check(IBMCS,CSVTAM_VIT_OPT_ALL)
– Verifies all VIT options are NOT in effect
 Check(IBMCS,CSVTAM_T1BUF_T2BUF_EE)
– Verifies T1BUF and T2BUF buffer pool allocations are not the defaults when
Enterprise Extender is in use
 Check(IBMCS,CSVTAM_T1BUF_T2BUF_NOEE)
– Verifies T1BUF and T2BUF buffer pool allocations defaults are in effect when the
Enterprise Extender is not in use
 CHECK(IBMPDSE,PDSE_SMSPDSE1)
– Verifies PDSE restartable address space is enabled
 CHECK(IBMVSAMRLS,VSAMRLS_DIAG_CONTENTION) - OA17734
– Verifies there is no VSAMRLS latch contention
 Check(IBMVSAMRLS,VSAMRLS_SINGLE_POINT_FALURE) – OA17782
– Detects/flags single points of failure in the Share Control Data Sets (SHCDS).
LSU Oct 2007
© 2007 IBM Corporation43


z/OS 1.9 Usability
Health Checker checks - New and Updated Checks…
 CHECK(IBMIXGLOGR,IXGLOGR_STRUCTUREFULL)
– Detects any logstreams that have encountered structure full conditions
 CHECK(IBMIXGLOGR,IXGLOGR_STAGINGDSFULL)
– Detects any LOGGER Staging ds. that have encountered structure full
conditions
 CHECK(IBMIXGLOGR,IXGLOGR_ENTRYTHRESHOLD)
– Detects any logstreams that have encountered entry threshold problems
LSU Oct 2007
© 2007 IBM Corporation44



z/OS 1.9 Usability
Health Checker checks - New and Updated Checks…
 CHECK(IBMCSV,CSV_LNKLST_NEWEXTENTS)
– Verifies that the number of extents used by each dataset in the LNKLST has not
changed since the LNKLST was activated.
 CHECK(IBMCSV,CSV_LNKLST_SPACE)
– Verifies that Partition Data Sets defined in any active LNKLST are allocated with
only primary space.
 CHECK(IBMCSV,CSV_APF_EXISTS)
– Verifies the data sets described by entries in the APF list are consistent with data
sets that exist on the system.
 CHECK(IBMCSV,CSV_LPA_CHANGES)
– Detects changes in LPA from IPL to IPL
 CHECK(IBMSUP,IEA_ASIDS)
– Detects abnormal ASID usage, and detects/warns when a IPL may become
necessary due to usage trends in ASIDs
 CHECK(IBMSUP,IEA_LXS)
– Detects abnormal LX and ELX usage
LSU Oct 2007
© 2007 IBM Corporation45
 IBM Health Checker for z/OS User’s
Guide (SA22-7994)
– New IBM Health Checker System REXX Services
• HZSLSTRT: Indicate check is running.
• HZSLFMSG: IBM Health Checker for z/OS message service
• HZSLSTOP: Indicate check completion
– ADD/ADDREPLACE command is enhanced to add a System REXX
check via HZSPRMxx parmlib, or IBM Health Checker for z/OS
Modify command
– HZSADDCK service is enhanced to add a System REXX check
programmatically.
 Sample System REXX exec:
‘SYS1.SAMPLIB(HZSSXCHK)’
z/OS 1.9 Usability
Health Checker Appendix
LSU Oct 2007
© 2007 IBM Corporation46



Thinking of writing your own checks !
 Write a check routine that gathers information and compares and issues
message with results.
 Create a message table for the check output.
 Create a HZSADDCHECK exit routine. This routine adds one or more
checks and provides default values. It is called by IBM Health Checker
for z/OS dynamic exit, HZSADDCHECK
 Add HZSADDCHECK exit routine to the HZSADDCHECK exit, and have
system run the exit routine.
– For testing, can do it via operator command or program.
 Provide documentation about check overrides, and when check was
added
 Check will then run on its own, at the interval you specified for the check
